# Tinkoff Auto Invest

## Описание
Этот Python-скрипт автоматизирует покупку ценных бумаг через API брокера Тинькофф. Возможности скрипта:

- Выставление лимитных заявок с заданной скидкой или фиксированной ценой.
- Автоматическая покупка ценных бумаг по текущей рыночной цене.
- Возможность отмены всех активных заявок.
- Гибкая настройка списка покупаемых инструментов.
- Поддержка акций, ETF и облигаций.

Скрипт можно запускать вручную или автоматизировать его выполнение через планировщики задач (например, `cron` или Task Scheduler).

---

## Установка
### Требования:
- Python 3+
- Аккаунт в Тинькофф Инвестиции с доступом к API

### Шаги установки:
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/graf4444/tinkoff-auto-buy.git
   cd tinkoff-auto-buy
   ```
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

---

## Конфигурация
1. Создайте файл `config.py` и укажите API-токен:
   ```python
   # Ваш токен для API Тинькофф
   TOKEN = "ваш_токен"
   ```
   Токен можно получить на странице [настроек API Тинькофф Инвестиции](https://www.tinkoff.ru/invest/settings/api/).

2. В файле `run_invest.py` задайте список инструментов для торговли и параметры заявок:
   ```python
   SHARES = {
       "TRUR": {"amount": 3000, "discount_price": 8.6},
       "TMOS": {"amount": 3000},
       "TDIV": {"amount": 3000, "discount_price": 10},
       "TGLD": {"amount": 3000, "discount": 2},
       "SBER": {"amount": 3000, "discount_price": 302},
       "MOEX": {"amount": 3000, "discount_price": 197},
       "SU26248RMFS3": {"amount": 3000, "discount_price": 831},
   }
   ```
   - `amount` – сумма, на которую планируется покупка инструмента.
   - `discount` – скидка в процентах от текущей цены (-n% от текущей цены).
   - `discount_price` – фиксированная цена для покупки.

---

## Использование
Скрипт поддерживает три режима работы:
1. **Выставление лимитных заявок** (ниже текущих рыночных цен)
2. **Отмена всех активных заявок**
3. **Покупка по текущей рыночной цене**

Запуск скрипта:
```bash
python run_invest.py -m <режим>
```
Где `<режим>`:
- `1` – Выставление лимитных заявок
- `2` – Отмена всех заявок
- `3` – Покупка по рынку

Примеры:
```bash
python run_invest.py -m 1  # Выставление заявок
python run_invest.py -m 2  # Отмена всех заявок
python run_invest.py -m 3  # Покупка по рынку
```
